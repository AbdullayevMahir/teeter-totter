(function(){"use strict";var t={8635:function(t,e,i){var n=i(9242),o=i(3396);function a(t,e,i,n,a,s){const l=(0,o.up)("TheScene");return(0,o.wg)(),(0,o.j4)(l)}const s={ref:"scene",class:"scene"};function l(t,e,i,n,a,l){const r=(0,o.up)("TheControls"),g=(0,o.up)("GameInfo"),h=(0,o.up)("TheWeight"),c=(0,o.up)("TheBalance");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(r),(0,o.Wm)(g),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.weights,((t,e)=>((0,o.wg)(),(0,o.j4)(h,{key:e,index:e,type:t.type,isFalling:t.isFalling,weight:t.weight,positionY:t.positionY,positionProbability:t.horizontalPositionProbability,side:"left"},null,8,["index","type","isFalling","weight","positionY","positionProbability"])))),128)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.rightWeights||[],((t,e)=>((0,o.wg)(),(0,o.j4)(h,{key:e,index:e,type:t.type,isFalling:t.isFalling,weight:t.weight,positionY:t.positionY,positionProbability:t.horizontalPositionProbability,side:"right"},null,8,["index","type","isFalling","weight","positionY","positionProbability"])))),128)),(0,o.Wm)(c,{ref:"balanceTemplateRef"},null,512)],512)}var r=i(7139);const g={class:"info-container"};function h(t,e,i,n,a,s){return(0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("div",null,[(0,o._)("p",null,"Total Weight: "+(0,r.zw)(n.weight.totalLeftWeight),1),(0,o._)("p",null,"Momentum: "+(0,r.zw)(n.force.leftForce),1)]),(0,o._)("div",null,[(0,o._)("p",null,"Total Weight: "+(0,r.zw)(n.weight.totalRightWeight),1),(0,o._)("p",null,"Momentum: "+(0,r.zw)(n.force.rightForce),1)])])}var c=i(9749),u={name:"GameInfo",props:{msg:String},setup(){const t=(0,c.oR)(),e=(0,o.Fl)((e=>t.getters["main/getTotalWeight"])),i=(0,o.Fl)((e=>t.getters["main/getMomentum"]));return{weight:e,force:i}}},p=i(89);const d=(0,p.Z)(u,[["render",h],["__scopeId","data-v-a9097732"]]);var m=d;const f=t=>((0,o.dD)("data-v-ba33f6fe"),t=t(),(0,o.Cn)(),t),w={class:"balance"},b=f((()=>(0,o._)("div",{class:"space"},null,-1))),v=f((()=>(0,o._)("div",{class:"balance-bottom"},null,-1)));function W(t,e,i,n,a,s){return(0,o.wg)(),(0,o.iD)("div",w,[b,(0,o.Uk)(" "+(0,r.zw)(n.rotationAngle)+" ",1),(0,o._)("div",{style:(0,r.j5)({transform:"rotate("+n.rotationAngle+"deg)"}),ref:"balanceLine",class:"line"},null,4),v])}var F=i(4870),P={name:"TheBalance",props:{msg:String},setup(){const t=(0,c.oR)(),e=(0,F.iH)(null),i=(0,o.Fl)((e=>t.getters["balance/getRotationAngle"]));return(0,o.bv)((()=>{t.dispatch("balance/setBalanceLineTopPosition",e.value.getBoundingClientRect().top)})),{balanceLine:e,rotationAngle:i}}};const R=(0,p.Z)(P,[["render",W],["__scopeId","data-v-ba33f6fe"]]);var y=R;const D={class:"weight-text"},L=["src"];function x(t,e,i,n,a,s){return(0,o.wg)(),(0,o.iD)("div",{class:(0,r.C_)([i.type,"box-container"]),style:(0,r.j5)({width:n.boxWidth+"px",height:n.boxWidth+"px",top:i.positionY+"px",left:"left"===i.side?n.positionX+"px":"initial",right:"right"===i.side?n.positionX+"px":"initial"})},[(0,o._)("span",D,(0,r.zw)(i.weight),1),"triangle"===i.type?((0,o.wg)(),(0,o.iD)("img",{key:0,style:{width:"100%"},src:n.triangleImage},null,8,L)):(0,o.kq)("",!0)],6)}const T=(t,e,i,n="left")=>{let o=t;const a=Math.abs(500*Math.sin(A(e))),s=parseInt(t)+a*(1-i),l=parseInt(t)-a*(1-i);return o="left"===n?e>0?l:s:e>0?s:l,o},A=t=>t*(Math.PI/180);var S={name:"TheWeight",props:{index:Number,type:{type:String,default:"t"},weight:{type:Number,default:1},positionY:{type:Number,default:1},isFalling:Boolean,positionProbability:{type:Number,default:1},side:String},setup(t){const e=(0,c.oR)(),i=(0,F.iH)(8*t.weight+60),n=(0,o.Fl)((t=>e.getters["main/getBalanceLimits"])),a=(0,o.Fl)((e=>n.value+500*t.positionProbability)),s=(0,o.Fl)((t=>e.getters["balance/getRotationAngle"])),l=(0,o.Fl)((t=>e.getters["balance/getBalanceTopPosition"]));(0,o.YP)((()=>(0,F.iH)(t.positionY)),((n,o)=>{const a=T(l.value,s.value,t.positionProbability,t.side);a<t.positionY+i.value&&t.isFalling&&e.dispatch("left"===t.side?"main/updateWeightFalling":"main/updateRightWeightFalling",{index:t.index,isFalling:!1})}));const r="/triangle.png";return{boxWidth:i,balanceSideLimits:n,positionX:a,triangleImage:r}}};const _=(0,p.Z)(S,[["render",x],["__scopeId","data-v-b412e162"]]);var B=_;const I=(t,e)=>t>e&&0!==e?t/e*.05:t<e&&0!==t?e/t*-.05:0,Y={class:"info-container"};function z(t,e,i,n,a,s){return(0,o.wg)(),(0,o.iD)("div",Y,[(0,o._)("button",{onClick:e[0]||(e[0]=t=>n.setGameState(!0))},"Pause"),(0,o._)("button",{onClick:e[1]||(e[1]=t=>n.setGameState(!1))},"Continue")])}var k={name:"TheControls",props:{msg:String},setup(){const t=(0,c.oR)(),e=(0,o.Fl)((e=>t.getters["main/getTotalWeight"])),i=(0,o.Fl)((e=>t.getters["main/getMomentum"])),n=e=>{console.log(e),t.dispatch("main/setGameState",e)};return{weight:e,force:i,setGameState:n}}};const G=(0,p.Z)(k,[["render",z],["__scopeId","data-v-083adebc"]]);var C=G;function M(t,e){const i=i=>{console.log(i),37===i.keyCode?t(!0):39===i.keyCode&&e(!0)},n=i=>{37===i.keyCode?t(!1):39===i.keyCode&&e(!1)};(0,o.bv)((()=>window.addEventListener("keydown",i))),(0,o.bv)((()=>window.addEventListener("keyup",n))),(0,o.Ah)((()=>window.removeEventListener("keydown",i))),(0,o.Ah)((()=>window.removeEventListener("keyUp",n)))}var O={name:"TheScene",components:{TheWeight:B,GameInfo:m,TheBalance:y,TheControls:C},props:{msg:String},setup(){let t=4;const e=(0,c.oR)(),i=(0,F.iH)(null);let n=(0,o.Fl)((t=>e.getters["main/getGameState"]));const a=(0,o.Fl)((t=>e.getters["main/getWeights"])),s=(0,o.Fl)((t=>e.getters["main/getRandomWeights"])),l=(0,o.Fl)((t=>e.getters["balance/getRotationAngle"])),r=(0,o.Fl)((t=>e.getters["balance/getBalanceTopPosition"])),g=t=>{e.dispatch("main/setIsArrowLeftDown",t)},h=t=>{e.dispatch("main/setIsArrowRightDown",t)};return M(g,h),(0,o.bv)((()=>{const o=(i.value.clientWidth-1e3)/2;e.dispatch("main/setBalanceSideLimit",{balanceSideLimit:o});const g=()=>{if(n.value)return requestAnimationFrame(g);for(let n=0;n<a.value.length;n++)a.value[n].isFalling&&e.dispatch("main/updateWeightPosition",{index:n,speed:t});for(let n=0;n<s.value.length;n++)s.value[n].isFalling&&e.dispatch("main/updateRightWeightPosition",{index:n,speed:t});let i=0;for(let t=0;t<s.value.length;t++)if(!s.value[t].isFalling){i+=s.value[t].weight,e.dispatch("main/setTotalRightWeight",i);let n=T(r.value,l.value,s.value[t].horizontalPositionProbability,"right");n-=8*s.value[t].weight+60,e.dispatch("main/setFalledRightWeightPosition",{index:t,position:n})}let o=0;for(let t=0;t<a.value.length;t++)if(!a.value[t].isFalling){o+=a.value[t].weight,e.dispatch("main/setTotalLeftWeight",o);let i=T(r.value,l.value,a.value[t].horizontalPositionProbability,"left");i-=8*a.value[t].weight+60,e.dispatch("main/setFalledWeightPosition",{index:t,position:i})}const h=e.getters["main/getIsArrowLeftDown"],c=e.getters["main/getIsArrowRightDown"];if(h||c)for(let t=0;t<a.value.length;t++){const i=a.value[t];i.isFalling&&(h?e.dispatch("main/moveLeft",t):e.dispatch("main/moveRight",t))}const u=e.getters["main/getMomentum"],p=I(u.rightForce,u.leftForce);e.dispatch("balance/setRotationDelta",p),e.dispatch("balance/setBalanceRotationDeg"),(e.getters["balance/getRotationAngle"]>30||e.getters["balance/getRotationAngle"]<-30)&&(e.dispatch("main/setGameState",!0),alert("Game Over!")),requestAnimationFrame(g)};requestAnimationFrame(g)})),{scene:i,store:e,weights:a,rightWeights:s,pullRight:h,pullLeft:g}}};const j=(0,p.Z)(O,[["render",l],["__scopeId","data-v-0b4e0cd7"]]);var N=j,H={name:"App",components:{TheScene:N}};const Z=(0,p.Z)(H,[["render",a]]);var E=Z;const q=(t,e)=>{let i=0,n=0;for(let o of e)o.isFalling||(n+=o.weight*(1-o.horizontalPositionProbability));for(let o of t)o.isFalling||(i+=o.weight*(1-o.horizontalPositionProbability));return{rightForce:i,leftForce:n}};function X(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}const K=["rectangle","circle","triangle"],U=()=>({isGamePaused:!1,isArrowRightDown:!1,isArrowLeftDown:!1,balanceSideLimits:0,balanceRotationDeg:0,totalLeftWeight:0,totalRightWeight:0,force:{leftForce:0,rightForce:0},rightWeights:[{type:"circle",weight:6.3,isFalling:!1,horizontalPositionProbability:.5,positionY:-100},{type:"circle",weight:3,isFalling:!0,horizontalPositionProbability:.7,positionY:-100}],weights:[{type:"triangle",weight:5,isFalling:!0,horizontalPositionProbability:.3,positionY:-250}]}),J={getBalanceLimits:(t,e)=>t.balanceSideLimits,getWeights:t=>t.weights,getRandomWeights:t=>t.rightWeights,getMomentum(t){return q(t.rightWeights,t.weights)},getTotalWeight(t){return{totalRightWeight:t.totalRightWeight,totalLeftWeight:t.totalLeftWeight}},getGameState(t){return t.isGamePaused},getIsArrowRightDown(t){return t.isArrowRightDown},getIsArrowLeftDown(t){return t.isArrowLeftDown}},Q={setBalanceSideLimit({state:t,commit:e},i){e("setBalanceLimit",i)},setBalanceRotationDeg({state:t,commit:e},i){e("setBalanceRotationDeg",i)},pushNewWeight({state:t,commit:e},i){e("pushNewWeight",i)},updateWeightFalling({state:t,commit:e},{index:i,isFalling:n}){e("updateWeightFalling",{index:i,isFalling:n}),e("pushNewWeight")},updateRightWeightFalling({state:t,commit:e},{index:i,isFalling:n}){e("updateRightWeightFalling",{index:i,isFalling:n}),e("pushNewWeightToRight")},updateWeightPosition({commit:t},{index:e,speed:i}){t("updateWeightPosition",{index:e,speed:i})},updateRightWeightPosition({commit:t},{index:e,speed:i}){t("updateRightWeightPosition",{index:e,speed:i})},setFalledWeightPosition({commit:t},{index:e,position:i}){t("setFalledWeightPosition",{index:e,position:i})},setFalledRightWeightPosition({commit:t},{index:e,position:i}){t("setFalledRightWeightPosition",{index:e,position:i})},setTotalRightWeight({commit:t},e){t("setTotalRightWeight",e)},setIsArrowLeftDown({commit:t},e){t("setIsArrowLeftDown",e)},setIsArrowRightDown({commit:t},e){t("setIsArrowRightDown",e)},moveLeft({commit:t},e){t("moveLeft",e)},moveRight({commit:t},e){t("moveRight",e)},setTotalLeftWeight({commit:t},e){t("setTotalLeftWeight",e)},setGameState({commit:t},e){t("setGameState",e)}},V={setBalanceLimit(t,{balanceSideLimit:e}){t.balanceSideLimits=e},setBalanceRotationDeg(t,{balanceRotationDeg:e}){t.balanceRotationDeg=e},pushNewWeight(t){const e=X(1,10),i=X(1,7)/10,n=X(0,2);t.weights.push({type:K[n],weight:e,isFalling:!0,horizontalPositionProbability:i,positionY:-100})},pushNewWeightToRight(t){const e=X(1,10),i=X(1,7)/10,n=X(0,2);t.rightWeights.push({type:K[n],weight:e,isFalling:!0,horizontalPositionProbability:i,positionY:-100})},updateWeightPosition(t,{index:e,speed:i}){t.weights[e].positionY+=i},updateRightWeightPosition(t,{index:e,speed:i}){t.rightWeights[e].positionY+=i},updateWeightFalling(t,{index:e,isFalling:i}){t.weights[e].isFalling=i},updateRightWeightFalling(t,{index:e,isFalling:i}){t.rightWeights[e].isFalling=i},setFalledWeightPosition(t,{index:e,position:i}){t.weights[e].positionY=i},setFalledRightWeightPosition(t,{index:e,position:i}){t.rightWeights[e].positionY=i},setIsArrowLeftDown(t,e){t.isArrowLeftDown=e},setIsArrowRightDown(t,e){t.isArrowRightDown=e},moveLeft(t,e){t.weights[e].horizontalPositionProbability>0&&(t.weights[e].horizontalPositionProbability-=.003)},moveRight(t,e){t.weights[e].horizontalPositionProbability<.8&&(t.weights[e].horizontalPositionProbability+=.003)},setTotalRightWeight(t,e){t.totalRightWeight=e},setTotalLeftWeight(t,e){t.totalLeftWeight=e},setGameState(t,e){t.isGamePaused=e}};var $={namespaced:!0,state:U,getters:J,actions:Q,mutations:V};const tt=()=>({balanceTopPosition:0,rotationAngle:0,rotationDelta:.05,rightSideForce:0,leftSideForce:0}),et={getRotationDelta:(t,e)=>t.rotationDelta,getRotationAngle:(t,e)=>t.rotationAngle,getBalanceTopPosition:(t,e)=>t.balanceTopPosition},it={setBalanceRotationDeg({state:t,commit:e}){e("setBalanceRotationDeg")},setBalanceLineTopPosition({state:t,commit:e},i){e("setBalanceLineTopPosition",i)},setRotationDelta({commit:t},e){t("setRotationDelta",e)}},nt={setBalanceRotationDeg(t){t.rotationAngle=t.rotationAngle+t.rotationDelta},setBalanceLineTopPosition(t,e){t.balanceTopPosition=e},setRotationDelta(t,e){t.rotationDelta=e}};var ot={namespaced:!0,state:tt,getters:et,actions:it,mutations:nt};const at=!1;var st=(0,c.MT)({modules:{main:$,balance:ot},strict:at,plugins:at?[(0,c.hu)()]:[]});(0,n.ri)(E).use(st).mount("#app")}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(e,n,o,a){if(!n){var s=1/0;for(h=0;h<t.length;h++){n=t[h][0],o=t[h][1],a=t[h][2];for(var l=!0,r=0;r<n.length;r++)(!1&a||s>=a)&&Object.keys(i.O).every((function(t){return i.O[t](n[r])}))?n.splice(r--,1):(l=!1,a<s&&(s=a));if(l){t.splice(h--,1);var g=o();void 0!==g&&(e=g)}}return e}a=a||0;for(var h=t.length;h>0&&t[h-1][2]>a;h--)t[h]=t[h-1];t[h]=[n,o,a]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,a,s=n[0],l=n[1],r=n[2],g=0;if(s.some((function(e){return 0!==t[e]}))){for(o in l)i.o(l,o)&&(i.m[o]=l[o]);if(r)var h=r(i)}for(e&&e(n);g<s.length;g++)a=s[g],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(h)},n=self["webpackChunkteeter_totter"]=self["webpackChunkteeter_totter"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(8635)}));n=i.O(n)})();
//# sourceMappingURL=app.9f1ea790.js.map